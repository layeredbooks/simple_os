<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
lang="en" xml:lang="en">
<head>
<title>Simple_OS documentation</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2013-03-05 11:00:59 CET"/>
<meta name="author" content="Ola Dahl"/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color:lightblue; font-weight:normal }
  .target { }
  .timestamp { color: grey }
  .timestamp-kwd { color: CadetBlue }
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*/-->
</script>
</head><body>
<h1 class="title">Simple_OS documentation</h1>



<p>
Simple_OS is a small real-time operating system developed for the purpose
of education and research. 
</p>
<p>
If you have questions or comments, please contact
Ola Dahl - dahl.ola@gmail.com
</p>
<p>
<i>This is documentation for Simple_OS version 2013-03-05</i>
</p>
<p>
Changes relative to previous version (2011-10-31)
</p><ul>
<li>
Simple_OS is now released under GPL
</li>
<li>
See the file COPYING for more information 

</li>
</ul>

<p><i>Older versions</i>
</p>
<p>
<i>Simple_OS version 2011-10-31</i>
</p>
<p>
Changes relative to previous version (2011-10-24)
</p><ul>
<li>
in file si_comm.c, the variable waitd.tv_usec is now set to zero, for the
purpose of better real-time execution for Simple_OS programs communicating
with the Java GUI program

</li>
</ul>

<p><i>Simple_OS version 2011-10-24</i>
</p>
<p>
First version to be used in education at Linköping University. Older
versions have been used at Malmö University, starting in 2003.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Delivery and directory structure </a></li>
<li><a href="#sec-2">Quick start Linux </a></li>
<li><a href="#sec-3">Quick start Windows </a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Delivery and directory structure </h2>
<div id="text-1">


<p>
A Simple_OS delivery is bundled in a zip-file, named simple_os_&lt;date&gt;.zip. 
</p>
<p>
This version of Simple_OS can be downloaded using the link
</p>
<p>
<a href="http://theintobooks.com/books/intorealtime/simple_os_2013_03_05.zip">http://theintobooks.com/books/intorealtime/simple_os_2013_03_05.zip</a>
</p>
<p>
When unzipping this file, the following three directories are created, 
inside the simple_os_&lt;date&gt; directory: 
</p>
<ul>
<li>
simple_os_apps - containing Simple_OS applications, for demonstration purpose, and from 
which code can be re-used if needed when making your own Simple_OS applications. 
For additional info, please see the <a href="simple_os_apps/Simple_OS_apps_README.html">README-file</a> in this directory

</li>
<li>
java_gui - containing a graphical user interface, for communication with an executing 
Simple_OS program. For additional info, please see the <a href="java_gui/Java_GUI_README.html">README-file</a> in this directory

</li>
<li>
simple_os - with the actual RTOS, pre-built as a library, but also 
including the source code. Here, you can also find makefiles for use 
on a Linux host for building the library for execution on Linux host (native compilation, 
running the RTOS as a soft-kernel inside a Linux program), or on ARM target 
(cross-compilation for ARM on Beagleboard). 
If you have a Windows host, it is possible to build the library for execution on a 
Windows host (running the RTOS as a soft-kernel inside a Windows program), using a 
Visual Studio Express project, stored inside the win subdirectory (some levels down, the 
project file i.e. the file to be opened in Visual Studio Express is called simple_os.sln)

</li>
</ul>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Quick start Linux </h2>
<div id="text-2">


<ul>
<li>
start a terminal window
</li>
<li>
go to simple_os_&lt;date&gt;/simple_os_apps/barber/gui directory
</li>
<li>
run the program using
<pre class="example">
./prog_x86_host
</pre>
</li>
<li>
this should result in a printout indicating that the program is waiting for a 
socket connection

</li>
<li>
start another terminal window
</li>
<li>
go to simple_os_&lt;date&gt;/java_gui/java
</li>
<li>
start the Java GUI program using 
<pre class="example">
 java GUISimpleOS
</pre>

</li>
</ul>

<p>The GUI should now be connected to the running Simple_OS application
</p>
<p>
Create some customers with File-&gt;Send text to Simple_OS and then 
enter the string new
</p>
<p>
The customers will visit the barber shop, and after they have had their 
hair cuts, they will rest for a while, and then come back again 
</p>
<p>
You can close the Simple_OS application (and keeping the GUI running), 
using File-&gt;Exit Simple_OS
</p>
<p>
Then you can modify the Simple_OS application if you want, and build it. 
NOTE: this requires that you set the environment variable SIMPLE_OS_DIR. 
</p>
<p>
The variable SIMPLE_OS_DIR shall be set to the simple_os directory inside your 
installation directory, e.g. like this for tcsh
</p>
<pre class="example">
setenv SIMPLE_OS_DIR /home/ola/simple_os_2013_03_05/simple_os
</pre>

<p>
and like this for bash: 
</p>
<pre class="example">
export SIMPLE_OS_DIR=/home/ola/simple_os_2013_03_05/simple_os
</pre>

<p>
If you now try 
</p>
<pre class="example">
make -f Makefile_32 
</pre>

<p>
the program will be rebuilt. 
</p>
<p>
Start it again, using 
</p>
<pre class="example">
./prog_x86_host
</pre>

<p>
and it will connect to the GUI again. 
</p>
<p>
When tired of running the GUI, close it by using File-&gt;Exit
</p>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">Quick start Windows </h2>
<div id="text-3">


<p>
Simple_OS in Windows can be used with Visual C++ Express Edition. 
</p>
<p>
Visual C++ Express Edition can be obtained from 
</p>
<p>
<a href="http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-cpp-express">http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-cpp-express</a>
</p>
<p>
It may be possible to use also other C compilers, but that has not been verified. 
</p>
<p>
Supposing that Visual C++ Express Edition is available,  the following steps can be taken: 
</p>
<ul>
<li>
start a Windows explorer (or My computer application)
</li>
<li>
go to simple_os_&lt;date&gt;\simple_os_apps\win\vs_cpp_2010_express\simple_os_prog directory
</li>
<li>
double-click or press enter on the file simple_os_prog.sln
</li>
<li>
Visual C++ Express Edition should now be open. Ensure that the project is
active by clicking once on simple_os_prog (in bold) in the Solution Explorer window.
</li>
<li>
In Visual C++ Express Edition, choose Project -&gt; Add Existing Item (or use Shift-Alt-A)
</li>
<li>
Then navigate to the directory simple_os_&lt;date&gt;/simple_os_apps/barber/gui/src, and add 
all c-files and h-files found there to the project 
</li>
<li>
Build the program using Debug-&gt;Build Solution (or use F7 for build, or Ctrl-Alt-F7 for Rebuild)
</li>
<li>
Run the program by choosing Debug-&gt;Start Debugging (or use Ctrl-F5)
</li>
<li>
this should result in a printout indicating that the program is waiting for a 
socket connection

</li>
<li>
start a Windows command window
</li>
<li>
go to simple_os_&lt;date&gt;\java_gui\java
</li>
<li>
start java GUI program using 
<pre class="example">
 java GUISimpleOS
</pre>

</li>
</ul>

<p>The GUI should now be connected to the running Simple_OS application
</p>
<p>
Create some customers with File-&gt;Send text to Simple_OS and then 
enter the string new
</p>
<p>
The customers will visit the barber shop, and after they have had their 
hair cuts, they will rest for a while, and then come back again 
</p>
<p>
You can close the Simple_OS application (and keeping the GUI running), 
using File-&gt;Exit Simple_OS
</p>
<p>
Then you can modify the Simple_OS application if you want, and build it. 
</p>
<p>
If you now try 
</p>
<ul>
<li>
Debug-&gt;Build Solution (or use F7 for build, or Ctrl-Alt-F7 for Rebuild)

</li>
</ul>

<p>the program will be rebuilt. 
</p>
<p>
Start it again, using 
</p>
<ul>
<li>
Debug-&gt;Start Debugging (or use Ctrl-F5)

</li>
</ul>

<p>and it will connect to the GUI again. 
</p>
<p>
When tired of running the GUI, close it by using File-&gt;Exit
</p>
</div>
</div>
<div id="postamble"><p class="author"> Author: Ola Dahl
<a href="mailto:dahl dot ola at gmail dot com">&lt;dahl dot ola at gmail dot com&gt;</a>
</p>
<p class="date"> Date: 2013-03-05 11:00:59 CET</p>
<p>HTML generated by org-mode 6.21b in emacs 23</p>
</div></body>
</html>
